<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Writing your own Perl modules « Dinomite.net</title>

    <link href="/stylesheets/all.css" rel="stylesheet" />
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
  </head>
  <body>

    <div id="main" role="main">
      <nav>
  <ul>
    <li>
      <span class="blog-title"><a class="blog-title" href="/">Dinomite.net</a></span>
      <span class="blog-subtitle">the blog of Drew Stephens</span>
    </li>
  </ul>
</nav>


      <div class="main-content">
        <p>Making your own Perl modules is actually really easy, only involving a few special alterations to a script and an environment variable to make them easy to utilize.  To make Perl modules, you first need to understand Object Oriented Perl, so if that's new to you, check out <a href="http://search.cpan.org/dist/perl/pod/perltoot.pod">Tom's object-oriented Perl Tutorial</a>.  Onward.</p>

<p>For this example, I'll just use a simplified version of the 'Person' class from the above-mentioned tutorial:</p>
<pre class="brush: perl;">
package Person;
use strict;

sub new {
	my $self  = {
		NAME =&gt; undef,
		AGE =&gt; undef,
		PEERS =&gt; [],
	};
	bless($self);
	return $self;
}
sub name {
	my $self = shift;
	if (@_) { $self-&gt;{NAME} = shift }
	return $self-&gt;{NAME};
}
sub age {
	my $self = shift;
	if (@_) { $self-&gt;{AGE} = shift }
	return $self-&gt;{AGE};
}
sub peers {
	my $self = shift;
	if (@_) { @{ $self-&gt;{PEERS} } = @_ }
	return @{ $self-&gt;{PEERS} };
}
1;
</pre>

<p>To begin with, let's make a directory where you will put all the modules you make; say, <code>~/perl-modules</code>.  Take the code above and save it as <code>Person.pm</code> in your new <code>perl-modules</code> directory.  Notice the <code>.pm</code> extension that <code>perl</code> will look for when you go to <code>use</code> this module.  Now, we need to let <code>perl</code> know where to look for the modules you write.  When you ask for a Perl module by writing <code>use foo</code> in a script, <code>perl</code>, by default, it looks in a bunch of system directories and in the current directory for anything named <code>foo.pm</code>.  You can tell it to look other places by adding to the <code>PERL5LIB</code> environment variable.  For ease, I simply put this into my <code>.bashrc</code>:</p>

<pre>
export PERL5LIB=~/perl-modules
</pre>

<p>Now, anywhere that I write a perl script, I can simply say <code>use Person</code> and the Person class will be grabbed from my <code>perl-modules</code> directory.</p>

<p>Another thing to keep in mind when writing modules is that you should load the <code>Carp</code> module and use the functions <code>carp</code> and <code>croak</code> rather than <code>warn</code> and <code>die</code> respectively.  <code>Carp</code>'s functions produce errors that reference the proper context in the user's code when an error occurs, rather then saying there is a problem in your module.</p>

      </div>

      <sidebar class="sidebar">
  <ul>
    <li><h5 class="heading">See Also</h5></li>
    <li>
      <ol>
        <li><a href="https://twitter.com/dinomite">Twitter</a></li>
        <li><a href="https://github.com/dinomite">GitHub</a></li>
        <li><a href="https://www.flickr.com/photos/dinomite">Flickr</a></li>
        <li><a href="http://pinboard.in/u:dinomite">Pinboard</a></li>
        <li><a href="http://www.last.fm/user/dinomite">Last.fm</a></li>
        <li><a href="http://search.cpan.org/~dinomite/">CPAN</a></li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Recent Articles</h5></li>
    <li>
      <ol>
            <li>
              <a href="/blog/2014/04/04/wunderground-with-the-lacrosse-c84612.html">Wunderground with the LaCrosse C84612</a>
              <div class="article-link-date">Apr  4, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/13/making-1080p-timelapses-with-lightroom.html">Making 1080p Timelapses with Lightroom</a>
              <div class="article-link-date">Feb 13, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/03/at-1-on-mac-os-x.html">at(1) on Mac OS X</a>
              <div class="article-link-date">Feb  3, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/01/25/anti-pull-dog-harnesses.html">Anti-pull dog harnesses</a>
              <div class="article-link-date">Jan 25, 2014</div>
            </li>
            <li>
              <a href="/blog/2013/06/27/goruck-challenge-preparation.html">GORUCK Challenge</a>
              <div class="article-link-date">Jun 27, 2013</div>
            </li>
            <li>
              <a href="/blog/2012/12/03/packing-bricks-for-the-goruck-challenge.html">Packing Bricks for the GORUCK Challenge</a>
              <div class="article-link-date">Dec  3, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/09/11/tough-mudder-mid-atlantic-2013.html">Tough Mudder Mid-Atlantic 2012</a>
              <div class="article-link-date">Sep 11, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/08/12/crumpler-haven-with-canon-40d.html">Crumpler Haven With Canon 40D</a>
              <div class="article-link-date">Aug 12, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/03/19/replacing-an-e36-window-motor.html">Replacing an E36 Window Motor</a>
              <div class="article-link-date">Mar 19, 2012</div>
            </li>
            <li>
              <a href="/blog/2011/10/26/perl-and-dubstep.html">Perl and Dubstep</a>
              <div class="article-link-date">Oct 26, 2011</div>
            </li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Tags</h5></li>
    <li>
      <ol>
            <li><a href="/blog/tags/computers.html">Computers (3)</a></li>
            <li><a href="/blog/tags/linux.html">Linux (3)</a></li>
            <li><a href="/blog/tags/uncategorized.html">Uncategorized (5)</a></li>
            <li><a href="/blog/tags/networking.html">Networking (1)</a></li>
            <li><a href="/blog/tags/cars.html">Cars (3)</a></li>
            <li><a href="/blog/tags/programming.html">Programming (1)</a></li>
            <li><a href="/blog/tags/politics.html">Politics (2)</a></li>
      </ol>
    </li>
  </ul>
</sidebar>

    </div>

    <footer>
  Copyright 2005–2016 Drew Stephens
</footer>

  </body>
</html>
