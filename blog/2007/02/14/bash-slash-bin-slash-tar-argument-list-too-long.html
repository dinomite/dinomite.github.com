<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>bash: /bin/tar: Argument list too long « Dinomite.net</title>

    <link href="/stylesheets/all.css" rel="stylesheet" />
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
  </head>
  <body>

    <div id="main" role="main">
      <nav>
  <ul>
    <li>
      <span class="blog-title"><a class="blog-title" href="/">Dinomite.net</a></span>
      <span class="blog-subtitle">the blog of Drew Stephens</span>
    </li>
  </ul>
</nav>


      <div class="main-content">
        <p>Anyone who has worked with large numbers of files has seen the error '<code>Argument list too long</code>' returned by a command before, usually something like <code>cp</code> or <code>rm</code>.  Eventually, they find <code>xargs</code> and all is well again; rather than globbing directly, you use <code>find</code> and <code>xargs</code> to feed the intended command:</p>

<pre>
~/tmp$ ls | wc -l
77029
~/tmp$ cp * /foo/bar/
bash: /bin/cp: Argument list too long
~/tmp$ find . -print0 | xargs -0 -I {} cp {} /foo/bar/
</pre>

<p>For those who don't know, that final command is running find, which simply prints a list of the files in the current directory.  <code>xargs</code> then passes a not-too-long subset of that list to <code>cp</code> in batches, replacing the {} with said list.  The <code>-print0</code> tells <code>find</code> to terminate each filename with a null character rather than the default newline, so that weird filenames work; the corresponding option <code>-0</code> must be used with <code>xargs</code> so that it looks for that syntax.  Now, on to the problem of the day.</p>

<p>I know <code>xargs</code>, but for the problem I had, I didn't think it would help (more on that later).  I wanted to <code>tar</code> up a whole bunch of files, too many for the command line to handle.  The solution was simple, for <code>tar</code> provides an option to receive its list of files that makeup an archive from a file:</p>

<pre>
~/tmp$ find . -print &gt; baz.lst
~/tmp$ tar -cf baz.tar --files-from baz.lst
</pre>

<p>Simple.  There's probably a way to one-line that, but simply piping the output of <code>find</code> to tar with <code>--files-from -</code> didn't work, and I didn't spend any more time trying to figure it out.  As I said previously, I didn't think <code>xargs</code> would help, but I pulled up the <code>tar</code> manpage and, using the <code>-r</code> option, you can append to an existing archive, which could work in conjunction with <code>xargs</code> just fine.</p>

      </div>

      <sidebar class="sidebar">
  <ul>
    <li><h5 class="heading">See Also</h5></li>
    <li>
      <ol>
        <li><a href="https://twitter.com/dinomite">Twitter</a></li>
        <li><a href="https://github.com/dinomite">GitHub</a></li>
        <li><a href="https://www.flickr.com/photos/dinomite">Flickr</a></li>
        <li><a href="http://pinboard.in/u:dinomite">Pinboard</a></li>
        <li><a href="http://www.last.fm/user/dinomite">Last.fm</a></li>
        <li><a href="http://search.cpan.org/~dinomite/">CPAN</a></li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Recent Articles</h5></li>
    <li>
      <ol>
            <li>
              <a href="/blog/2014/04/04/wunderground-with-the-lacrosse-c84612.html">Wunderground with the LaCrosse C84612</a>
              <div class="article-link-date">Apr  4, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/13/making-1080p-timelapses-with-lightroom.html">Making 1080p Timelapses with Lightroom</a>
              <div class="article-link-date">Feb 13, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/03/at-1-on-mac-os-x.html">at(1) on Mac OS X</a>
              <div class="article-link-date">Feb  3, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/01/25/anti-pull-dog-harnesses.html">Anti-pull dog harnesses</a>
              <div class="article-link-date">Jan 25, 2014</div>
            </li>
            <li>
              <a href="/blog/2013/06/27/goruck-challenge-preparation.html">GORUCK Challenge</a>
              <div class="article-link-date">Jun 27, 2013</div>
            </li>
            <li>
              <a href="/blog/2012/12/03/packing-bricks-for-the-goruck-challenge.html">Packing Bricks for the GORUCK Challenge</a>
              <div class="article-link-date">Dec  3, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/09/11/tough-mudder-mid-atlantic-2013.html">Tough Mudder Mid-Atlantic 2012</a>
              <div class="article-link-date">Sep 11, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/08/12/crumpler-haven-with-canon-40d.html">Crumpler Haven With Canon 40D</a>
              <div class="article-link-date">Aug 12, 2012</div>
            </li>
            <li>
              <a href="/blog/2012/03/19/replacing-an-e36-window-motor.html">Replacing an E36 Window Motor</a>
              <div class="article-link-date">Mar 19, 2012</div>
            </li>
            <li>
              <a href="/blog/2011/10/26/perl-and-dubstep.html">Perl and Dubstep</a>
              <div class="article-link-date">Oct 26, 2011</div>
            </li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Tags</h5></li>
    <li>
      <ol>
            <li><a href="/blog/tags/computers.html">Computers (3)</a></li>
            <li><a href="/blog/tags/linux.html">Linux (3)</a></li>
            <li><a href="/blog/tags/uncategorized.html">Uncategorized (5)</a></li>
            <li><a href="/blog/tags/networking.html">Networking (1)</a></li>
            <li><a href="/blog/tags/cars.html">Cars (3)</a></li>
            <li><a href="/blog/tags/programming.html">Programming (1)</a></li>
            <li><a href="/blog/tags/politics.html">Politics (2)</a></li>
      </ol>
    </li>
  </ul>
</sidebar>

    </div>

    <footer>
  Copyright 2005–2016 Drew Stephens
</footer>

  </body>
</html>
