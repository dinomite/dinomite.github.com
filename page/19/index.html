<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Dinomite.net</title>

    <link href="/stylesheets/all.css" rel="stylesheet" />
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml" />
  </head>
  <body>
    <div id="main" role="main">
      <nav>
  <ul>
    <li>
      <span class="blog-title"><a class="blog-title" href="/">Dinomite.net</a></span>
      <span class="blog-subtitle">the blog of Drew Stephens</span>
    </li>
  </ul>
</nav>


      <div class="main-content">
          <p>Page 19 of 27</p>

    <p><a href="/page/18/">Previous page</a></p>

<ul>
    <h1 class="article-title"><a href="/blog/2007/04/08/psad-on-ubuntu/">psad on Ubuntu</a></h1>
    <div class="article-title-date">Apr  8, 2007</div>
    <p><code>psad</code> (PortScan Attack Detector) is a useful tool for detecting portscans against a system and, optionally, blocking the offending host.  To use <code>psad</code> you configure your firewall to drop and log all packets that are not specifically allowed, i.e., those that are handled by services on the machine.  The configuration for <code>psad</code> can cause a little bit of grief because it depends on some quite particular firewall setup and, if you don&rsquo;t want massive logfiles, some editing of <code>syslog.conf</code>.  To begin with, you&rsquo;ll need to install <code>psad</code> which can be done via apt:</p>

<p><code><pre>
$ sudo aptitude install psad
</pre></code></p>

<p>There are some configuration details that should be changed in <code>/etc/psad/psad.conf</code>, most notably the hostname and email variables.  Make sure that if you set the email address to something other than one of the accounts on the machine that your mail daemon is setup to deliver mail to the outside world.  Next, setup the firewall to accept packets for the services that your machine runs then drop and log all others.  In this example, the machine runs a web server (port 80) and ssh (port 22):</p>

<p><code><pre>
$ sudo iptables -F INPUT
$ sudo iptables -P INPUT ACCEPT
$ sudo iptables -A INPUT -i lo -j ACCEPT
$ sudo iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
$ sudo iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
$ sudo iptables -A INPUT -j LOG --log-prefix &quot;DROP &quot; --log-level debug
$ sudo iptables -A INPUT -j DROP
</pre></code></p>

<p>Which should probably be put into a script that will be run on startup.  Finally alter the <code>/etc/syslog.conf</code> so that your <code>/var/log/messages</code> doesn&rsquo;t fill up as the second-to-last rule above  writes a logline each time a packet is dropped.  First, I changed the line that controls <code>kern.log</code> from this:</p>

<p><code><pre>
kern.*              -/var/log/kern.log
</pre></code></p>

<p>to this:</p>

<p><code><pre>
kern.info;kern.!debug       -/var/log/kern.log
</pre></code></p>

<p>and adding this line at the end:</p>

<p><code><pre>
*.=debug    |/var/lib/psad/psadfifo
</pre></code></p>

<p>The first syslog change keeps your /var/log/kern.log and /var/log/messages from getting a line each time a packet is dropped (which is quite often) and the latter change sends all those dropped packet notifications (which are at the &lsquo;debug&rsquo; loglevel) to psad.</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/04/05/windows-server-2003-updates/">Windows Server 2003 Updates</a></h1>
    <div class="article-title-date">Apr  5, 2007</div>
    <p>Dear Microsoft,</p>

<p>I am running Windows <strong>Server</strong> 2003 on, get this, a <strong>server</strong>!  I know that I haven&rsquo;t restarted since running an update, please stop telling me.</p>

<p>Thanks,<br />
Admins Everywhere</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/03/22/md5-digests-in-java/">MD5 Digests in Java</a></h1>
    <div class="article-title-date">Mar 22, 2007</div>
    <p>File hashes have a multitude of uses and MD5 is, despite the fact that weaknesses have been found in the algorithm, still very useful and widely employed.  Creating MD5 digests in Java is quite easy, but the documentation for <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/security/MessageDigest.html">MessageDigest</a> is a little bit tricky.  Here is a simple method that takes in a string of input and returns the hash of the string.</p>

<p><code><pre>
public static String md5(String input) {
    // Compute the MD5 digest of the passed String
    MessageDigest algorithm = null;
    try {
        algorithm = MessageDigest.getInstance(&quot;MD5&quot;);
    } catch (NoSuchAlgorithmException e) { e.printStackTrace(); }
    algorithm.reset();
    byte[] hash = algorithm.digest(input.getBytes());</p>
<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre>// Convert it to a String
StringBuffer ret = new StringBuffer();
for (int x = 0; x &lt; hash.length; x++) {
    String hexString = Integer.toHexString(0xFF &amp; hash[x]);
    if (hexString.length() == 1)
        hexString = "0" + hexString;

    ret.append(hexString);

    // Add the dashes
    if (x == 3 || x == 5 || x == 7 || x == 9)
        ret.append("-");
} //for

return ret.toString().toUpperCase();
</pre></td></tr></tbody></table>
</div>

<p>} //md5
</code></pre></p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/03/15/perl-just-like-sed/">Perl Just Like sed</a></h1>
    <div class="article-title-date">Mar 15, 2007</div>
    <p>I came across a post today in which someone mentioned that they used Perl for text replacement and, despite the simplicity of the solution, I hadn&rsquo;t ever thought of it.  By simply using three options with the <code>perl</code> command, you can run a quick script to do regex replacement in a file.  The <code>-p</code> option tells Perl to treat your script as a loop, reading in from the diamond (<code>&lt;&gt;</code>) operator.  <code>-i</code> makes it do in-place editing of files and <code>-e</code> allows you to script from the command line.  For example:</p>

<p><code><pre>
~$ perl -p -i -e &quot;s/foo/bar/g&quot; baz.txt
</code></pre></p>

<p>The above command will replace &lsquo;foo&rsquo; with &#39;bar&rsquo; throughout the file &#39;baz.txt&rsquo;</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/03/13/writing-your-own-perl-modules/">Writing your own Perl modules</a></h1>
    <div class="article-title-date">Mar 13, 2007</div>
    <p>Making your own Perl modules is actually really easy, only involving a few special alterations to a script and an environment variable to make them easy to utilize.  To make Perl modules, you first need to understand Object Oriented Perl, so if that&rsquo;s new to you, check out <a href="http://search.cpan.org/dist/perl/pod/perltoot.pod">Tom&rsquo;s object-oriented Perl Tutorial</a>.  Onward.</p>

<p>For this example, I&rsquo;ll just use a simplified version of the &lsquo;Person&rsquo; class from the above-mentioned tutorial:
<pre class="brush: perl;">
package Person;
use strict;</p>

<p>sub new {
    my $self  = {
        NAME =&gt; undef,
        AGE =&gt; undef,
        PEERS =&gt; [],
    };
    bless($self);
    return $self;
}
sub name {
    my $self = shift;
    if (@<em>) { $self-&gt;{NAME} = shift }
    return $self-&gt;{NAME};
}
sub age {
    my $self = shift;
    if (@</em>) { $self-&gt;{AGE} = shift }
    return $self-&gt;{AGE};
}
sub peers {
    my $self = shift;
    if (@<em>) { @{ $self-&gt;{PEERS} } = @</em> }
    return @{ $self-&gt;{PEERS} };
}
1;
</pre></p>

<p>To begin with, let&rsquo;s make a directory where you will put all the modules you make; say, <code>~/perl-modules</code>.  Take the code above and save it as <code>Person.pm</code> in your new <code>perl-modules</code> directory.  Notice the <code>.pm</code> extension that <code>perl</code> will look for when you go to <code>use</code> this module.  Now, we need to let <code>perl</code> know where to look for the modules you write.  When you ask for a Perl module by writing <code>use foo</code> in a script, <code>perl</code>, by default, it looks in a bunch of system directories and in the current directory for anything named <code>foo.pm</code>.  You can tell it to look other places by adding to the <code>PERL5LIB</code> environment variable.  For ease, I simply put this into my <code>.bashrc</code>:</p>

<pre>
export PERL5LIB=~/perl-modules
</pre>

<p>Now, anywhere that I write a perl script, I can simply say <code>use Person</code> and the Person class will be grabbed from my <code>perl-modules</code> directory.</p>

<p>Another thing to keep in mind when writing modules is that you should load the <code>Carp</code> module and use the functions <code>carp</code> and <code>croak</code> rather than <code>warn</code> and <code>die</code> respectively.  <code>Carp</code>&rsquo;s functions produce errors that reference the proper context in the user&rsquo;s code when an error occurs, rather then saying there is a problem in your module.</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/03/05/chm-to-pdf-conversion/">CHM to PDF conversion</a></h1>
    <div class="article-title-date">Mar  5, 2007</div>
    <p>Have some CHMs that you&rsquo;d rather browse as PDFs?  Easy.  To convert, you&rsquo;ll need <code>libchm-bin</code> and <code>htmldoc</code> on Ubuntu, probably the same on Debian and similar on others.  Then, do the following:</p>

<p><code><pre>
$ extract_chmLib foo.chm foo/
$ htmldoc --webpage -f foo.pdf foo/*.html
</pre><code></p>

<p>Done.</p>
 
    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/03/03/malfunction-junction/">Malfunction Junction</a></h1>
    <div class="article-title-date">Mar  3, 2007</div>
    <p>Wikipedia has an amazingly large and varied database of information, including numerous lists, such as a <a href="http://en.wikipedia.org/wiki/Malfunction_Junction">list of ridiculous highway intersections</a>.  There are some really screwed up intersections shown on that page most notably <a href="http://maps.google.com/maps?q=Knoxville+TN&amp;ll=35.968559,-83.928831&amp;spn=0.007086,0.017231&amp;t=h">I-40 meeting I-295 in Knoxville</a>,    <a href="http://maps.google.com/maps?q=Detroit+MI&amp;ll=42.378733,-83.216962&amp;spn=0.003448,0.007328&amp;t=h">I-96 with highway 39 in Detroit</a>,  and the local-to-me <a href="http://maps.google.com/maps?ie=UTF8&amp;lr=lang_en&amp;om=1&amp;z=15&amp;ll=38.784197,-77.172303&amp;spn=0.027632,0.066133&amp;t=h">Springfield Mixing Bowl</a>.  None of these intersections, however, can shake a stick at Swindon&rsquo;s <a href="http://en.wikipedia.org/wiki/Magic_Roundabout_%28Swindon%29">Magic Roundabout</a> which is a single large central roundabout with 5 feeder roundabouts.</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/02/27/using-gmail-as-an-information-store/">Using Gmail as an information store</a></h1>
    <div class="article-title-date">Feb 27, 2007</div>
    <p><a href="http://www.micropersuasion.com">This guy</a> has a <a href="http://www.micropersuasion.com/2007/02/transform_gmail.html">very good tip</a> on how to use Gmail to store arbitrary information.  I&rsquo;m sure everyone has at sometime used some web-based email as a method of either moving data or otherwise storing something, by simply sending a message to yourself.  Well, he goes a step further and setup a way to automatically take emails sent to a specific sub address (<code>yourname+something@gmail.com</code>) and archive them away.  Simply setup a filter to take anything sent to <code>yourname+database@gmail.com</code>, apply the label &lsquo;database&rsquo; and archive it.  When you come across something interesting on the internets, simply email it to <code>yourname+database@gmail.com</code> and it will skip your inbox but be held forevermore in Gmail&rsquo;s coffers.  To recall it later, just run a search for <code>label:database keywords</code> and google will search through your database.</p>

<p>Rubel goes a step further, using Google Toolbar&rsquo;s &#39;send to Gmail&rsquo; function which takes the page you&rsquo;re currently looking at and pipes it to an email.  Just toss in your database address and send it to be stored.</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/02/25/pandora-internet-radio/">Pandora Internet Radio</a></h1>
    <div class="article-title-date">Feb 25, 2007</div>
    <p><a href="http://pandora.com">Pandora</a> is an internet radio service that also recommends new music, based upon what you tell it you like.  You simple give it some artists that you like and it will start playing songs by those artists, as well as artists that Pandora thinks are similar.  By giving each played track a thumbs-up or thumbs-down vote, Pandora learns what you like and tailors the &lsquo;stations&rsquo; that you make to your taste, all the while showing you new music similar to what you have given a thumbs-up.  Check it out.</p>

    <div class="article-footer"></div>
    <h1 class="article-title"><a href="/blog/2007/02/24/using-sed/">Using sed</a></h1>
    <div class="article-title-date">Feb 24, 2007</div>
    <p>Many people don&rsquo;t have a clue how to use old-school Unix commands such as <code>sed</code> and I can say that I was in that camp until recently.  Previously, I would be more inclined to write a script in Perl or open up vi to perform complex and repetitive replacement tasks across multiple files.  I&rsquo;m comfortable with both Perl and vi, most importantly their regular expressions which allow for quick and easy manipulation of text.  I was pushed to learn <code>sed</code> when I had a number of different files that all needed a very similar modification to each of their thousands of lines.  Sure I could write a Perl script to do it, but it was a good opportunity to learn the stream editor and I&rsquo;m glad I did.</p>

<p>The most useful thing <code>sed</code> can do is regex-based alterations to files just like vi, except you can apply a <code>sed</code> command to multiple files from the command line with a simple glob.  The syntax for <code>sed</code> regex is much like that for <code>vi</code> or Perl; the big difference that I encountered as compared to Perl is that capturing with parenthesis is done using backslash-escaped parenthesis and the later references with backslash-escaped numbers.  If you run <code>sed</code> without any options, it takes a regex and any number of input files; the output will be to standard out, so <code>sed &#39;s/foo/bar/&#39; *.txt</code> will replace &lsquo;foo&rsquo; with &#39;bar&rsquo; in all text files in the current directory, showing you the results on <code>STDOUT</code>. This is great to test and make sure the right changes are going to be made, but to actually make the changes, the best method is to use <code>sed</code>&rsquo;s in-place editing option, <code>-i</code>.  Now, if you run <code>sed -i &#39;s/foo/bar/&#39; *.txt</code>, <code>sed</code> will replace &#39;foo&rsquo; with &#39;bar&rsquo; in all files in the current directory, altering each of the files.</p>

    <div class="article-footer"></div>
</ul>

    <p><a href="/page/20/">Next page</a></p>

      </div>

      <sidebar class="sidebar">
  <ul>
    <li><h5 class="heading">See Also</h5></li>
    <li>
      <ol>
        <li><a href="https://twitter.com/dinomite">Twitter</a></li>
        <li><a href="https://github.com/dinomite">GitHub</a></li>
        <li><a href="https://www.flickr.com/photos/dinomite">Flickr</a></li>
        <li><a href="http://pinboard.in/u:dinomite">Pinboard</a></li>
        <li><a href="http://www.last.fm/user/dinomite">Last.fm</a></li>
        <li><a href="http://search.cpan.org/~dinomite/">CPAN</a></li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Recent Articles</h5></li>
    <li>
      <ol>
            <li>
              <a href="/blog/2016/05/02/reading-devise-sessions-in-java/">Reading Devise sessions in Java</a>
              <div class="article-link-date">May  2, 2016</div>
            </li>
            <li>
              <a href="/blog/2016/03/18/better-rails.cache-invalidation-with-quick-queries/">Better Rails.cache Invalidation with Quick Queries</a>
              <div class="article-link-date">Mar 18, 2016</div>
            </li>
            <li>
              <a href="/blog/2016/03/07/winter-tech-forum-is-the-finest/">Winter Tech Forum is The Finest</a>
              <div class="article-link-date">Mar  7, 2016</div>
            </li>
            <li>
              <a href="/blog/2014/12/30/serene-night-biking/">Serene night biking</a>
              <div class="article-link-date">Dec 30, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/04/04/wunderground-with-the-lacrosse-c84612/">Wunderground with the LaCrosse C84612</a>
              <div class="article-link-date">Apr  4, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/13/making-1080p-timelapses-with-lightroom/">Making 1080p Timelapses with Lightroom</a>
              <div class="article-link-date">Feb 13, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/02/03/at-1-on-mac-os-x/">at(1) on Mac OS X</a>
              <div class="article-link-date">Feb  3, 2014</div>
            </li>
            <li>
              <a href="/blog/2014/01/25/anti-pull-dog-harnesses/">Anti-pull dog harnesses</a>
              <div class="article-link-date">Jan 25, 2014</div>
            </li>
            <li>
              <a href="/blog/2013/06/27/goruck-challenge-preparation/">GORUCK Challenge</a>
              <div class="article-link-date">Jun 27, 2013</div>
            </li>
            <li>
              <a href="/blog/2012/12/03/packing-bricks-for-the-goruck-challenge/">Packing Bricks for the GORUCK Challenge</a>
              <div class="article-link-date">Dec  3, 2012</div>
            </li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Tags</h5></li>
    <li>
      <ol>
            <li><a href="/blog/tags/computers/">Computers (3)</a></li>
            <li><a href="/blog/tags/linux/">Linux (3)</a></li>
            <li><a href="/blog/tags/uncategorized/">Uncategorized (5)</a></li>
            <li><a href="/blog/tags/networking/">Networking (1)</a></li>
            <li><a href="/blog/tags/cars/">Cars (3)</a></li>
            <li><a href="/blog/tags/programming/">Programming (1)</a></li>
            <li><a href="/blog/tags/politics/">Politics (2)</a></li>
            <li><a href="/blog/tags/biking/">biking (1)</a></li>
            <li><a href="/blog/tags/tech/">Tech (3)</a></li>
            <li><a href="/blog/tags/rails/">Rails (2)</a></li>
      </ol>
    </li>
  </ul>

  <ul>
    <li><h5 class="heading">Posts by Year</h5></li>
        <li><a href="/blog/2005">2005</a></li>
        <li><a href="/blog/2006">2006</a></li>
        <li><a href="/blog/2007">2007</a></li>
        <li><a href="/blog/2008">2008</a></li>
        <li><a href="/blog/2009">2009</a></li>
        <li><a href="/blog/2010">2010</a></li>
        <li><a href="/blog/2011">2011</a></li>
        <li><a href="/blog/2012">2012</a></li>
        <li><a href="/blog/2013">2013</a></li>
        <li><a href="/blog/2014">2014</a></li>
        <li><a href="/blog/2015">2015</a></li>
        <li><a href="/blog/2016">2016</a></li>
  </ul>
</sidebar>

    </div>

    <footer>
  Copyright 2005–2016 Drew Stephens
</footer>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-2474105-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>
